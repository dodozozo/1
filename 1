if not game:IsLoaded() then
    game.Loaded:Wait()
end

print("Game loaded")

-- Простая функция для идентификации экзекьютора
getgenv().identifyexecutor = function() 
    return "Velocity" 
end

-- Простая функция поиска в таблице
if not table.find then
    table.find = function(t, value)
        for i, v in pairs(t) do
            if v == value then
                return i
            end
        end
        return nil
    end
end

local players = game:GetService('Players')
local localPlayer = players.LocalPlayer
if not localPlayer then
    players:GetPropertyChangedSignal('LocalPlayer'):Wait()
    localPlayer = players.LocalPlayer
end

print("LocalPlayer found")

local function simpleLoad(url)
    print("Loading from: " .. url)
    local success, result = pcall(function()
        return game:HttpGetAsync(url, true)
    end)
    
    if success then
        print("HTTP request successful")
        local loader = loadstring(result)
        if loader then
            print("Script loaded successfully")
            return loader()
        else
            warn("Failed to loadstring the script")
        end
    else
        warn("HTTP request failed: " .. result)
    end
    return nil
end

local placeid = game.PlaceId
print("PlaceId: " .. placeid)

if placeid == 13253735473 then
    simpleLoad('https://raw.githubusercontent.com/mainstreamed/amongus-hook/main/tridentsurvival/main.lua')
elseif placeid == 13800717766 or placeid == 15479377118 or placeid == 16849012343 then
    simpleLoad('https://raw.githubusercontent.com/mainstreamed/amongus-hook/main/fallensurvival/main.lua')
else
    warn("Unsupported game: " .. placeid)
end
